(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{1426:function(e,t,n){},"66ea":function(e,t,n){"use strict";(function(e,t){n("03cd");var o=s(n("66fd")),a=s(n("6fe6")),r=s(n("3fe0"));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o.default.config.productionTip=!1,a.default.mpType="app",o.default.prototype.stringToDateTime=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return null==e||e.length<19?"":e.substring(0,4)+t+e.substring(5,7)+n+e.substring(8,10)+o+" "+e.substring(11,19)},o.default.prototype.stringToDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return null==e||e.length<10?"":e.substring(0,4)+t+e.substring(5,7)+n+e.substring(8,10)+o},o.default.prototype.stringToHour=function(e){return null==e||e.length<16?"":e.substring(11,16)},o.default.prototype.showMsg=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";!1!==Boolean(t)&&e.showToast({title:t,duration:n,mask:o,icon:a})},o.default.prototype.POST=function(t,n,o,a){var r=this,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"biz",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"application/json",i="https://biz.zjxztc.com",u=this;"auth"==s?i="https://auth.zjxztc.com":"passport"==s?i="https://passport.zjxztc.com":"applets"==s?i="https://applets.zjxztc.com":"repay"==s&&(i="https://repay.zjxztc.com"),e.request({url:i+t,method:"POST",header:{"content-type":c,Authorization:"Bearer "+o},data:n,async:!1,complete:function(o){if(e.hideLoading(),200==o.statusCode)a(o.data);else if(401==o.statusCode){var s=e.getStorageSync("accessToken"),l=e.getStorageSync("refreshToken");s&&l?e.request({url:"https://auth.zjxztc.com/api/Auth/RefreshToken",method:"POST",header:{"content-type":"application/json"},data:{accessToken:s,refreshToken:l},async:!1,complete:function(o){200!=o.statusCode||"object"!=typeof o.data||0==o.data.Status?e.reLaunch({url:"/pages/login/login.vue"}):(s=o.data.Data.accessToken,l=o.data.Data.refreshToken,u.userInfo.accessToken=s,u.userInfo.refreshToken=l,e.setStorageSync("accessToken",s),e.setStorageSync("refreshToken",l),e.request({url:i+t,method:"POST",header:{"content-type":c,Authorization:"Bearer "+s},data:n,async:!1,complete:function(e){200==e.statusCode?a(e.data):r.showMsg("服务器异常!")}}))}}):e.reLaunch({url:"/pages/login/login.vue"})}else 500==o.statusCode?r.showMsg("服务器错误，请重试!"):(console.log(o),r.showMsg("未知错误，请重试!"))}})},o.default.prototype.Get=function(t,n,o,a){var r=this,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"biz",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"application/json",i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u="https://biz.zjxztc.com",l=this;"auth"==s?u="https://auth.zjxztc.com":"passport"==s?u="https://passport.zjxztc.com":"applets"==s?u="https://applets.zjxztc.com":"repay"==s&&(u="https://repay.zjxztc.com"),e.request({url:u+t,method:"Get",header:{"content-type":c,Authorization:"Bearer "+o},data:n,async:i,complete:function(o){if(e.hideLoading(),200==o.statusCode)a(o.data);else if(401==o.statusCode){var s=e.getStorageSync("accessToken"),p=e.getStorageSync("refreshToken");s&&p?e.request({url:"https://auth-chengdi.pepsi56.com/api/Auth/RefreshToken",method:"POST",header:{"content-type":"application/json"},data:{accessToken:s,refreshToken:p},async:i,complete:function(o){200!=o.statusCode||"object"!=typeof o.data||0==o.data.Status?e.reLaunch({url:"/pages/login/login.vue"}):(s=o.data.Data.accessToken,p=o.data.Data.refreshToken,l.userInfo.accessToken=s,l.userInfo.refreshToken=p,e.setStorageSync("accessToken",s),e.setStorageSync("refreshToken",p),e.request({url:u+t,method:"Get",header:{"content-type":c,Authorization:"Bearer "+s},data:n,async:i,complete:function(e){200==e.statusCode?a(e.data):r.showMsg("服务器异常!")}}))}}):e.reLaunch({url:"/pages/login/login.vue"})}else r.showMsg("服务器异常!")}})},o.default.prototype.RefreshToken=function(t,n,o){e.request({url:"https://auth.zjxztc.com/api/Auth/RefreshToken",method:"POST",header:{"content-type":"application/json"},data:data,async:!1,complete:function(e){200!=e.statusCode||"object"!=typeof e.data||(o.accessToken=e.data.Data.accessToken,o.refreshToken=e.data.Data.refreshToken)}})};var l=new o.default(i({store:r.default},a.default));t(l).$mount()}).call(this,n("543d")["default"],n("543d")["createApp"])},6806:function(e,t,n){"use strict";n.r(t);var o=n("dd8f"),a=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=a.a},"6fe6":function(e,t,n){"use strict";n.r(t);var o=n("6806");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("7286");var r,s,c,i,u=n("f0c5"),l=Object(u["a"])(o["default"],r,s,!1,null,null,null,!1,c,i);t["default"]=l.exports},7286:function(e,t,n){"use strict";var o=n("1426"),a=n.n(o);a.a},dd8f:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(n("66fd"));var o=n("2f62"),a=r(n("7a58"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={onLaunch:function(){this.GetUserInfo()},onShow:function(){},onHide:function(){},computed:c({},(0,o.mapState)(["hasLogin","userInfo","unionId","openId"])),methods:c(c({},(0,o.mapMutations)(["login"])),{},{GetUserInfo:function(){var t=this;e.login({provider:"weixin",success:function(n){wx.getSetting({success:function(o){if(o.authSetting["scope.userInfo"])e.getUserInfo({provider:"weixin",success:function(e){t.Decode(n.code,e.encryptedData,e.iv)},fail:function(t){e.reLaunch({url:"/pages/login/login"})}});else{var r=e.getStorageSync("openId"),s=e.getStorageSync("unionId");a.default.IsNull(r)?e.reLaunch({url:"/pages/login/login"}):t.LoginByUnionID(s,r)}}})}})},Decode:function(t,n,o){var a=this,r={code:t};a.POST("/api/Pay/GetAppletsOpenidUnionid",r,"",(function(t){e.setStorageSync("unionId",t.Data.unionid),e.setStorageSync("openId",t.Data.openid),a.LoginByUnionID(t.Data.unionid,t.Data.openid)}),"applets","application/x-www-form-urlencoded")},LoginByUnionID:function(t,n){var o=this,a=e.getStorageSync("mobile");o.POST("/api/Auth/LoginByUnionID",{unionId:t,openIdApplets:n,mobile:a},"",(function(t){t.Status&&o.Get("/api/User/GetUserByUnionID",{},t.Data.accessToken,(function(a){a.Status&&(a.Data.accessToken=t.Data.accessToken,a.Data.refreshToken=t.Data.refreshToken,a.Data.OpenID=n,e.setStorageSync("accessToken",t.Data.accessToken),e.setStorageSync("refreshToken",t.Data.refreshToken),e.setStorageSync("login",a.Data),e.setStorageSync("fullname",a.Data.FullName),e.setStorageSync("mobile",a.Data.Mobile),e.setStorageSync("headurl",a.Data.HeadUrl),o.login(a.Data))}),"biz")}),"auth","application/x-www-form-urlencoded")}})};t.default=u}).call(this,n("543d")["default"])}},[["66ea","common/runtime","common/vendor"]]]);