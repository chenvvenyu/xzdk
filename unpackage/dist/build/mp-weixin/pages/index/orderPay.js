(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/orderPay"],{3008:function(e,r,n){"use strict";var o=n("9350"),t=n.n(o);t.a},"4fc3":function(e,r,n){"use strict";var o;n.d(r,"b",(function(){return t})),n.d(r,"c",(function(){return a})),n.d(r,"a",(function(){return o}));var t=function(){var e=this,r=e.$createElement;e._self._c},a=[]},"6a89":function(e,r,n){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n("7a58")),t=n("2f62");function a(e){return e&&e.__esModule?e:{default:e}}function i(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?i(Object(n),!0).forEach((function(r){d(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function d(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var c={data:function(){return{OrderID:-1,PayTypeIndex:-1,ShowPassword:!1,PayPassword:"",OrderInfo:{},PayTypeList:[{logo:"/static/images/zf_weixin_06.png",name:"微信",type:"wechat"},{logo:"/static/images/zf_yuer_07.png",name:"余额",type:"balance"}]}},computed:s({},(0,t.mapState)(["hasLogin","userInfo"])),methods:{btnCancel:function(){var e=this;e.ShowPassword=!1,e.PayPassword=""},btnPay:function(){var r=this;if(o.default.IsNull(r.PayPassword))r.showMsg("请输入支付密码！");else{var n={password:r.PayPassword};r.POST("/api/User/CheckPayPassword",n,r.userInfo.accessToken,(function(o){o.Status&&1==o.Data?(n={orderNo:r.OrderInfo.order.OrderNO,client:2,payPassword:r.PayPassword},r.POST("/api/Order/BalancePay",n,r.userInfo.accessToken,(function(n){n.Status?e.reLaunch({url:"/pages/index/loadSuccess"}):r.showMsg(n.Message)}),"biz","application/x-www-form-urlencoded")):r.showMsg("密码错误！")}),"biz")}},LoadData:function(){var e=this;e.Get("/api/Order/GetOrder?id="+e.OrderID,"",e.userInfo.accessToken,(function(r){r.Status&&(e.OrderInfo=r.Data)}),"biz")},PayTypeChange:function(e){var r=this;e>r.PayTypeList.length-1||(r.PayTypeIndex=e)},btnSubmit:function(){var r=this;if(!o.default.IsInt(r.PayTypeIndex)||Number(r.PayTypeIndex)<0)r.showMsg("请选择支付方式");else if(!(r.PayTypeIndex>r.PayTypeList.length-1)){var n=r.PayTypeList[r.PayTypeIndex].type;switch(n){default:return void r.showMsg("请选择支付方式");case"wechat":var t={openId:r.userInfo.OpenID,orderId:r.OrderID};r.POST("/api/Pay/Wechat",t,r.userInfo.accessToken,(function(r){if(r.Status){var n=JSON.parse(r.Data);e.requestPayment({provider:"wxpay",timeStamp:n.timeStamp,nonceStr:n.nonceStr,package:n.package,signType:n.signType,paySign:n.paySign,success:function(r){"requestPayment:ok"==r.errMsg?e.reLaunch({url:"/pages/index/loadSuccess"}):e.showToast({icon:"none",title:"支付失败！"})},fail:function(){e.showToast({icon:"none",title:"取消支付！"})}})}else e.showToast({icon:"none",title:res.Message})}),"applets","application/x-www-form-urlencoded");break;case"balance":var a=this;if(o.default.IsNull(a.OrderInfo.order.OrderNO))return;a.ShowPassword=!0;break;case"arrive":var i={id:r.OrderInfo.order.ID,mailingPersonName:r.OrderInfo.order.MailingPersonName,mailingPhone:r.OrderInfo.order.MailingPhone,mailingAddress:r.OrderInfo.order.MailingAddress,mailingRegionID:r.OrderInfo.order.MailingRegionID,mailingRegion:r.OrderInfo.order.MailingRegion,receiptPersonName:r.OrderInfo.order.ReceiptPersonName,receiptPhone:r.OrderInfo.order.ReceiptPhone,receiptAddress:r.OrderInfo.order.ReceiptAddress,receiptRegionID:r.OrderInfo.order.ReceiptRegionID,receiptRegion:r.OrderInfo.order.ReceiptRegion,remark:r.OrderInfo.order.Remark,isProcuration:r.OrderInfo.order.IsProcuration,weight:r.OrderInfo.order.Weight,startWeight:r.OrderInfo.order.StartWeight,startPrice:r.OrderInfo.order.StartPrice,exceedWeight:r.OrderInfo.order.ExceedWeight,exceedPrice:r.OrderInfo.order.ExceedPrice,cost:r.OrderInfo.order.Cost,goodsPrice:r.OrderInfo.order.GoodsPrice,couponID:r.OrderInfo.order.CouponID,fareArrivePay:!0,expedited:r.OrderInfo.order.Expedited,goodsInfo:r.OrderInfo.order.GoodsInfo};r.POST("/api/Order/UpdateOrder",i,r.userInfo.accessToken,(function(r){r.Status&&e.reLaunch({url:"/pages/index/loadSuccess"})}),"biz");break}}}},onLoad:function(r){var n=this;n.OrderID=r.orderid,o.default.IsNull(n.OrderID)&&e.showModal({title:"错误提示",content:"发生未知错误，请到订单中心查看该订单信息！",success:function(){e.reLaunch({url:"/pages/index/index"})}}),n.LoadData()}};r.default=c}).call(this,n("543d")["default"])},"73ac":function(e,r,n){"use strict";n.r(r);var o=n("4fc3"),t=n("c23d");for(var a in t)"default"!==a&&function(e){n.d(r,e,(function(){return t[e]}))}(a);n("3008");var i,s=n("f0c5"),d=Object(s["a"])(t["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);r["default"]=d.exports},9350:function(e,r,n){},bbfb:function(e,r,n){"use strict";(function(e){n("03cd");o(n("66fd"));var r=o(n("73ac"));function o(e){return e&&e.__esModule?e:{default:e}}e(r.default)}).call(this,n("543d")["createPage"])},c23d:function(e,r,n){"use strict";n.r(r);var o=n("6a89"),t=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(r,e,(function(){return o[e]}))}(a);r["default"]=t.a}},[["bbfb","common/runtime","common/vendor"]]]);