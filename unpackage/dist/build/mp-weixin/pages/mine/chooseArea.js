(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/chooseArea"],{"279a":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r("7a58")),o=i(r("96cd")),s=r("2f62");function i(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u,l=function(){r.e("components/uni-search-bar/uni-search-bar").then(function(){return resolve(r("1b91"))}.bind(null,r)).catch(r.oe)},g=r("55c6"),f={components:{uniSearchBar:l},data:function(){return{busyFlag:!1,markerPoint:[{latitude:29.08624,longitude:119.5715}],locationAddr:{latitude:29.08624,longitude:119.5715,address:"",desc:""},addressComponent:{adcode:"",city:"",city_level:0,country:"",country_code:0,country_code_iso:"",country_code_iso2:"",direction:"",distance:"",district:"",province:"",street:"",street_number:"",town:"",town_code:""},regionList:[],polygons:[],currDistrict:"",PostData:{latitude:0,longitude:0,province:"",city:"",district:"",regionID:0,region:""},searchAddress:[]}},computed:a({},(0,s.mapState)(["hasLogin","userInfo"])),watch:{currDistrict:function(){var e=this;e.Get("/api/Region/GetRegionListByAddress?district="+e.addressComponent.district,"",e.userInfo.accessToken,(function(t){if(console.log("/api/Region/GetRegionListByAddress?district="+e.addressComponent.district),console.log(t),t.Status)if(t.Data&&t.Data.length>0){e.regionList=t.Data;for(var r=0;r<t.Data.length;r++){var n={points:[],strokeWidth:1,strokeColor:"#000000",fillColor:"#ffffff"},o=JSON.parse(t.Data[r].RangeGCJ02);if(o&&o.length>0)for(var s=0;s<o.length;s++){var i={latitude:o[s].lat,longitude:o[s].lng};n.points.push(i)}e.polygons.push(n)}}else e.polygons=[],e.regionList=[]}),"biz")}},methods:{MapSearch:function(e){if(!n.default.IsNull(e.value)){var t=this;u.suggestion({query:e.value,region:t.addressComponent.city,success:function(e){if(t.searchAddress=[],e.result||e.result.length>0){for(var r=0;r<e.result.length;r++)(n.default.IsNull(t.addressComponent.city)||e.result[r].city==t.addressComponent.city)&&t.searchAddress.push({latitude:e.result[r].location.lat,longitude:e.result[r].location.lng,address:e.result[r].address,desc:e.result[r].name,city:e.result[r].city,district:e.result[r].district,province:e.result[r].province});t.searchAddress&&t.searchAddress.length>0&&(t.markerPoint[0].latitude=t.searchAddress[0].latitude,t.markerPoint[0].longitude=t.searchAddress[0].longitude,t.locationAddr.latitude=t.searchAddress[0].latitude,t.locationAddr.longitude=t.searchAddress[0].longitude,t.locationAddr.address=t.searchAddress[0].address,t.locationAddr.desc=t.searchAddress[0].desc,t.currDistrict=t.searchAddress[0].district,t.addressComponent.province=t.searchAddress[0].province,t.addressComponent.city=t.searchAddress[0].city,t.addressComponent.district=t.searchAddress[0].district)}},fail:function(){t.searchAddress=[]}})}},touchend:function(){var t=this;e.createMapContext("map",this).getCenterLocation({success:function(e){u.regeocoding({location:e.latitude+","+e.longitude,success:function(e){var r=e.wxMarkerData;r&&r.length>0&&(t.locationAddr.latitude=r[0].latitude,t.locationAddr.longitude=r[0].longitude,t.locationAddr.address=r[0].address,t.locationAddr.desc=r[0].desc,t.addressComponent=e.originalData.result.addressComponent,t.markerPoint[0].latitude=t.locationAddr.latitude,t.markerPoint[0].longitude=t.locationAddr.longitude,t.currDistrict=t.addressComponent.district)}})}})},CheckIsPtInPoly:function(t){var r=this;if(r.markerPoint[0].latitude=r.searchAddress[t].latitude,r.markerPoint[0].longitude=r.searchAddress[t].longitude,r.locationAddr.latitude=r.searchAddress[t].latitude,r.locationAddr.longitude=r.searchAddress[t].longitude,r.locationAddr.address=r.searchAddress[t].address,r.locationAddr.desc=r.searchAddress[t].desc,r.addressComponent.province=r.searchAddress[t].province,r.addressComponent.city=r.searchAddress[t].city,r.addressComponent.district=r.searchAddress[t].district,!r.polygons||r.polygons.length<1)e.showToast({icon:"none",title:"该区域未开通服务"});else{for(var n=!1,s=0;s<r.polygons.length;s++)if(n=o.default.IsPtInPoly(r.locationAddr.latitude,r.locationAddr.longitude,r.polygons[s].points),!0===n){var i={City:r.regionList[s].City,District:r.regionList[s].District,RegionID:r.regionList[s].ID,Lat:r.regionList[s].Lat,Lng:r.regionList[s].Lng,RegionName:r.regionList[s].Name,Province:r.regionList[s].Province,Address:r.locationAddr.address,Desc:r.locationAddr.desc},d=getCurrentPages(),a=d[d.length-2];return a.$vm.PageReload(i,r),void e.navigateBack({delta:1})}e.showToast({icon:"none",title:"该区域未开通服务"})}}},onLoad:function(t){var r=this;u=new g.BMapWX,e.getLocation({type:"gcj02",success:function(e){u.regeocoding({location:e.latitude+","+e.longitude,success:function(e){var t=e.wxMarkerData;t&&t.length>0&&(r.locationAddr.latitude=t[0].latitude,r.locationAddr.longitude=t[0].longitude,r.locationAddr.address=t[0].address,r.locationAddr.desc=t[0].desc,r.searchAddress.push(r.locationAddr),r.addressComponent=e.originalData.result.addressComponent,r.markerPoint[0].latitude=r.locationAddr.latitude,r.markerPoint[0].longitude=r.locationAddr.longitude,r.currDistrict=r.addressComponent.district)}})}})}};t.default=f}).call(this,r("543d")["default"])},"5d15":function(e,t,r){"use strict";r.r(t);var n=r("bd53"),o=r("67b5");for(var s in o)"default"!==s&&function(e){r.d(t,e,(function(){return o[e]}))}(s);r("ecfb");var i,d=r("f0c5"),a=Object(d["a"])(o["default"],n["b"],n["c"],!1,null,"fdaaea46",null,!1,n["a"],i);t["default"]=a.exports},"67b5":function(e,t,r){"use strict";r.r(t);var n=r("279a"),o=r.n(n);for(var s in n)"default"!==s&&function(e){r.d(t,e,(function(){return n[e]}))}(s);t["default"]=o.a},"7c12":function(e,t,r){"use strict";(function(e){r("03cd");n(r("66fd"));var t=n(r("5d15"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])},b4c3:function(e,t,r){},bd53:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return n}));var n={uniSearchBar:function(){return r.e("components/uni-search-bar/uni-search-bar").then(r.bind(null,"1b91"))},uniIcons:function(){return r.e("components/uni-icons/uni-icons").then(r.bind(null,"b6ed"))}},o=function(){var e=this,t=e.$createElement;e._self._c},s=[]},ecfb:function(e,t,r){"use strict";var n=r("b4c3"),o=r.n(n);o.a}},[["7c12","common/runtime","common/vendor"]]]);