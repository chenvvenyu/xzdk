(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/inputCode"],{"0eba":function(e,n,t){"use strict";t.r(n);var o=t("5ded"),a=t.n(o);for(var r in o)"default"!==r&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=a.a},"147d6":function(e,n,t){"use strict";(function(e){t("03cd");o(t("66fd"));var n=o(t("8800"));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])},"32a1":function(e,n,t){},"542a":function(e,n,t){"use strict";var o;t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){return o}));var a=function(){var e=this,n=e.$createElement,t=(e._self._c,e.MobileDeal(e.Mobile));e.$mp.data=Object.assign({},{$root:{m0:t}})},r=[]},"5ded":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(t("7a58")),a=t("2f62");function r(e){return e&&e.__esModule?e:{default:e}}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){u(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var c={data:function(){return{Mobile:"",goUrl:"",Code:"",CustTime:60,intervalID:0,UserInfo:{}}},computed:s({},(0,a.mapState)(["unionId","userInfo","openId"])),methods:s(s({},(0,a.mapMutations)(["login"])),{},{MobileDeal:function(e){return o.default.IsPhone(e)?e.substring(0,3)+"****"+e.substring(7,11):""},sendSMS:function(){var n=this;if(o.default.IsPhone(n.Mobile)){var t={mobile:n.Mobile,scene:6,sendClient:2};n.POST("/api/Sms/Do",t,"",(function(t){t.Status?(e.showToast({icon:"none",title:"验证码已发送，请注意查收！"}),n.Code="",n.CustTime=60,n.intervalID=setInterval((function(){n.CustTime>0?n.CustTime--:(n.CustTime=0,clearInterval(n.intervalID))}),1e3)):e.showToast({icon:"none",title:t.Message})}),"passport")}else e.reLaunch({url:"/pages/login/login"})},btnSubmit:function(){var n=this;if(o.default.IsNull(n.Code)||6!=n.Code.length)e.showToast({icon:"none",title:"请输入6位短信验证码！"});else{var t={mobile:n.Mobile,code:n.Code,platform:2};n.POST("/api/Auth/LoginV3",t,"",(function(t){t.Status?(n.UserInfo=t.Data,n.UserInfo.mobile=n.Mobile,n.POST("/api/User/BindUnionID",{unionId:n.unionId,openIdApplets:n.openId,mobile:n.Mobile},n.UserInfo.accessToken,(function(t){if(t.Status){var o=e.getStorageSync("mobile");n.POST("/api/Auth/LoginByUnionID",{unionId:n.unionId,openIdApplets:n.openId,mobile:o},"",(function(t){t.Status?(n.UserInfo.accessToken=t.Data.accessToken,n.UserInfo.refreshToken=t.Data.refreshToken,n.Get("/api/User/GetUserByUnionID",{},n.UserInfo.accessToken,(function(t){t.Status?(t.Data.accessToken=n.UserInfo.accessToken,t.Data.refreshToken=n.UserInfo.refreshToken,t.Data.OpenID=n.openId,t.Data.UnionID=n.unionId,n.login(t.Data),e.setStorageSync("accessToken",n.UserInfo.accessToken),e.setStorageSync("refreshToken",n.UserInfo.refreshToken),e.setStorageSync("fullname",t.Data.FullName),e.setStorageSync("mobile",t.Data.Mobile),e.setStorageSync("headurl",t.Data.HeadUrl),e.setStorageSync("login",t.Data),n.showMsg("绑定成功！"),e.reLaunch({url:"/pages/index/index"})):e.showToast({icon:"none",title:t.Message})}),"biz")):e.navigateTo({url:"/pages/login/inputPhone"})}),"auth","application/x-www-form-urlencoded")}else e.showToast({icon:"none",title:t.Message}),n.CustTime=0}),"biz","application/x-www-form-urlencoded")):e.showToast({icon:"none",title:t.Message})}),"auth")}}}),onLoad:function(e){var n=this;n.goUrl=e.goto,"undefined"==n.goUrl&&(n.goUrl=""),n.Mobile=e.mobile,n.intervalID=setInterval((function(){n.CustTime>0?n.CustTime--:(n.CustTime=0,clearInterval(n.intervalID))}),1e3)}};n.default=c}).call(this,t("543d")["default"])},8800:function(e,n,t){"use strict";t.r(n);var o=t("542a"),a=t("0eba");for(var r in a)"default"!==r&&function(e){t.d(n,e,(function(){return a[e]}))}(r);t("aee6");var i,s=t("f0c5"),u=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);n["default"]=u.exports},aee6:function(e,n,t){"use strict";var o=t("32a1"),a=t.n(o);a.a}},[["147d6","common/runtime","common/vendor"]]]);